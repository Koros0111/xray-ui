{{define "form/vless"}}
<a-form layout="inline">
    <a-form-item label="id">
        <a-input v-model.trim="inbound.settings.vlesses[0].id"></a-input>
    </a-form-item>

    <a-form-item v-if="inbound.tls && inbound.isTcp || inbound.tls && inbound.isRaw " label="flow">
        <a-select v-model="inbound.settings.vlesses[0].flow" style="width: 180px">
            <a-select-option value="">无</a-select-option>
            <a-select-option v-for="key in FLOW_VISION" :value="key">[[ key ]]</a-select-option>
        </a-select>
    </a-form-item>
    <a-form-item v-if="inbound.reality" label="flow">
        <a-select v-model="inbound.settings.vlesses[0].flow" style="width: 150px">
            <a-select-option value="">无</a-select-option>
            <a-select-option v-for="key in FLOW_VISION" :value="key">[[ key ]]</a-select-option>
        </a-select>
    </a-form-item>
</a-form>
<a-form-item v-if="!inbound.tls || !inbound.reality" label="getNewVlessEnc">
    <a-form-item label="Authentication">
      <a-select v-model="inbound.settings.selectedAuth"  @change="getNewVlessEnc" style="width: 250px">
        <a-select-option value="X25519, not Post-Quantum">X25519 (not Post-Quantum)</a-select-option>
        <a-select-option value="ML-KEM-768, Post-Quantum">ML-KEM-768 (Post-Quantum)</a-select-option>
      </a-select>
    </a-form-item>
    <a-form-item label="decryption">
      <a-input v-model.trim="inbound.settings.decryption"></a-input>
    </a-form-item>
    <a-form-item label="encryption">
      <a-input v-model="inbound.settings.encryption"></a-input>
    </a-form-item>
    <a-form-item label=" ">
      <a-space>
        <a-button type="primary" icon="import" @click="getNewVlessEnc">Get New keys</a-button>
      </a-space>
    </a-form-item>
  </a-form>
</a-form-item>
<a-form layout="inline">
    <a-form-item label="fallbacks">
        <a-row>
            <a-button type="primary" size="small"
                      @click="inbound.settings.addFallback()">
                +
            </a-button>
        </a-row>
    </a-form-item>
</a-form>

<!-- vless fallbacks -->
<a-form v-for="(fallback, index) in inbound.settings.fallbacks" layout="inline">
    <a-divider>
        fallback[[ index + 1 ]]
        <a-icon type="delete" @click="() => inbound.settings.delFallback(index)"
                style="color: rgb(255, 77, 79);cursor: pointer;"/>
    </a-divider>
    <a-form-item label="name">
        <a-input v-model="fallback.name"></a-input>
    </a-form-item>
    <a-form-item label="alpn">
        <a-input v-model="fallback.alpn"></a-input>
    </a-form-item>
    <a-form-item label="path">
        <a-input v-model="fallback.path"></a-input>
    </a-form-item>
    <a-form-item label="dest">
        <a-input v-model="fallback.dest"></a-input>
    </a-form-item>
    <a-form-item label="xver">
        <a-input type="number" v-model.number="fallback.xver"></a-input>
    </a-form-item>
    <a-divider v-if="inbound.settings.fallbacks.length - 1 === index"/>
</a-form>
{{end}}